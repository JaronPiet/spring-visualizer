<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Spring Application Visualiser</title>
    <meta charset="utf-8" />
    <meta name="viewcontainer" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <style type="text/css">
        #ViewContainer {
            height: 500px;
            margin: auto;
        }
    </style>
</head>
<body>
    <script src="lib/codemirror.js"></script>
    <link rel=stylesheet href="lib/docs.css">
    <link rel="stylesheet" href="lib/codemirror.css">
    <script src="mode/xml/xml.js"></script>
    <script src="lib/three.min.js"></script>
    <script src="lib/three.js"></script>
    <style type="text/css">.CodeMirror { border-top: 1px solid black; border-bottom: 1px solid black;}  </style>

    <form>

        <h1>Application Visualiser</h1>
        <div id="ViewContainer" style="background-color: #000055"></div>

        <br />
        <div>Spring configuration file (xml): <input type="file" id="fileInput"></div>
        <pre id="fileDisplayArea"></pre>

        <label>Editor</label>
        <textarea id="SpringEditor" rows="190" cols="90"></textarea>


        <script src="lib/sigma.min.js"></script>
        <script src="lib/plugins/sigma.plugins.animate/sigma.plugins.animate.js"></script>
        <script src="lib/sigma.parsers.json.min.js"></script>
        <script src="SigmaView.js"></script>
        <script type="text/javascript" src="XmlEditor.js"></script>
        <script>

            function NewNode(nodeList)
            {
                var i,
                s,
                N = nodeList.length,
                E = nodeList.length,
                g = {
                    nodes: [],
                    edges: []
                };
                // Generate a random graph:
                for (i = 0; i < N; i++)
                {
                    g.nodes.push({
                        id: nodeList[i].Name,
                        label: nodeList[i].Name,
                        x: Math.random(),
                        y: Math.random(),
                        size: nodeList[i].References.length + 5,
                        color: '#5588ff'
                    });

                    for (j = 1; j < nodeList[i].References.length+1; j++)
                        g.edges.push({
                            id: 'e' + nodeList[i].Name+j,
                            source: nodeList[i].Name,
                            target: nodeList[i].References[j-1],
                            size: Math.random(),
                            color: '#ffffff'
                        });
                }
                //source: 'n' + (Math.random() * N | 0),
                //target: 'n' + (Math.random() * N | 0),
                // Instantiate sigma:
                s = new sigma({
                    graph: g,
                    renderer: { container: document.getElementById('ViewContainer'), type: 'canvas' },
                    settings: { labelColor: 'node', labelSize: 'fixed', labelThreshold: 1 }
                });

                s.refresh();
            }
        </script>



    </form>
    
</body>
</html>